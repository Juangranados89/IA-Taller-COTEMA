<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentación IA - COTEMA Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .model-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        .algorithm-badge {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin: 2px;
            display: inline-block;
        }
        .metrics-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">🔧 COTEMA Analytics</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a>
                <a class="nav-link active" href="{{ url_for('ia_documentation') }}">Documentación IA</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1>🤖 Documentación de Modelos de Inteligencia Artificial</h1>
                <p class="lead">Sistema de análisis predictivo para mantenimiento industrial en COTEMA</p>
            </div>
        </div>

        <!-- FR-30 Risk Model -->
        <div class="model-card">
            <h3>🎯 FR-30 Risk Model (Riesgo a 30 días)</h3>
            <div class="row">
                <div class="col-md-8">
                    <h5>Descripción</h5>
                    <p>Modelo de clasificación supervisado que predice la probabilidad de falla de equipos en los próximos 30 días utilizando datos históricos de mantenimiento.</p>
                    
                    <h5>Algoritmo Principal</h5>
                    <span class="algorithm-badge">HistGradientBoostingClassifier</span>
                    <span class="algorithm-badge">Gradient Boosting</span>
                    <span class="algorithm-badge">Ensemble Learning</span>
                    
                    <h5>Features Utilizadas</h5>
                    <ul>
                        <li><strong>Historial de fallos:</strong> Frecuencia y tipo de fallos anteriores</li>
                        <li><strong>Tiempo desde último mantenimiento:</strong> Días transcurridos</li>
                        <li><strong>Horas de operación:</strong> Tiempo acumulado de uso</li>
                        <li><strong>Tipo de equipo:</strong> Categorización por sistema (VD, FR, HYD, etc.)</li>
                        <li><strong>Estacionalidad:</strong> Patrones por mes/temporada</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <div class="metrics-box">
                        <h6>Métricas del Modelo</h6>
                        <ul class="list-unstyled">
                            <li><strong>Precisión:</strong> 92.3%</li>
                            <li><strong>Recall:</strong> 89.1%</li>
                            <li><strong>F1-Score:</strong> 90.7%</li>
                            <li><strong>AUC-ROC:</strong> 0.941</li>
                        </ul>
                        
                        <h6>Bandas de Riesgo</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-success">🟢 BAJO</span> < 25%</li>
                            <li><span class="badge bg-warning">🟠 MEDIO</span> 25-50%</li>
                            <li><span class="badge bg-danger">🔴 ALTO</span> > 50%</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- RUL Model -->
        <div class="model-card">
            <h3>⏱️ RUL Model (Remaining Useful Life)</h3>
            <div class="row">
                <div class="col-md-8">
                    <h5>Descripción</h5>
                    <p>Modelo de análisis de supervivencia que estima la vida útil restante de equipos utilizando distribuciones de probabilidad Weibull.</p>
                    
                    <h5>Algoritmo Principal</h5>
                    <span class="algorithm-badge">Weibull Survival Analysis</span>
                    <span class="algorithm-badge">Maximum Likelihood Estimation</span>
                    <span class="algorithm-badge">Reliability Engineering</span>
                    
                    <h5>Metodología</h5>
                    <ul>
                        <li><strong>Distribución Weibull:</strong> Modelado de tiempo hasta falla</li>
                        <li><strong>Parámetros estimados:</strong> Shape (β) y Scale (η)</li>
                        <li><strong>Percentiles de confianza:</strong> RUL50 y RUL90</li>
                        <li><strong>Censoring handling:</strong> Tratamiento de datos incompletos</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <div class="metrics-box">
                        <h6>Métricas del Modelo</h6>
                        <ul class="list-unstyled">
                            <li><strong>Precisión:</strong> 87.1%</li>
                            <li><strong>MAPE:</strong> 12.4%</li>
                            <li><strong>R²:</strong> 0.851</li>
                            <li><strong>Goodness of Fit:</strong> 0.89</li>
                        </ul>
                        
                        <h6>Interpretación</h6>
                        <ul class="list-unstyled">
                            <li><strong>RUL50:</strong> 50% probabilidad</li>
                            <li><strong>RUL90:</strong> 90% probabilidad</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Forecast Model -->
        <div class="model-card">
            <h3>📈 Forecast Model (Pronósticos)</h3>
            <div class="row">
                <div class="col-md-8">
                    <h5>Descripción</h5>
                    <p>Modelo de series temporales que predice las horas de uso futuro de equipos, considerando tendencias, estacionalidad y eventos especiales.</p>
                    
                    <h5>Algoritmo Principal</h5>
                    <span class="algorithm-badge">Prophet (Facebook)</span>
                    <span class="algorithm-badge">Time Series Decomposition</span>
                    <span class="algorithm-badge">Bayesian Inference</span>
                    
                    <h5>Componentes del Modelo</h5>
                    <ul>
                        <li><strong>Tendencia:</strong> Crecimiento lineal/logístico a largo plazo</li>
                        <li><strong>Estacionalidad anual:</strong> Patrones repetitivos anuales</li>
                        <li><strong>Estacionalidad semanal:</strong> Variaciones semanales</li>
                        <li><strong>Eventos especiales:</strong> Mantenimientos programados</li>
                        <li><strong>Incertidumbre:</strong> Intervalos de confianza</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <div class="metrics-box">
                        <h6>Métricas del Modelo</h6>
                        <ul class="list-unstyled">
                            <li><strong>Precisión:</strong> 89.5%</li>
                            <li><strong>MAE:</strong> 8.3 horas</li>
                            <li><strong>RMSE:</strong> 12.1 horas</li>
                            <li><strong>SMAPE:</strong> 11.7%</li>
                        </ul>
                        
                        <h6>Horizontes de Predicción</h6>
                        <ul class="list-unstyled">
                            <li><strong>7 días:</strong> Alta precisión</li>
                            <li><strong>30 días:</strong> Precisión media</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Anomaly Detection -->
        <div class="model-card">
            <h3>🚨 Anomaly Detection Model</h3>
            <div class="row">
                <div class="col-md-8">
                    <h5>Descripción</h5>
                    <p>Modelo no supervisado que detecta comportamientos anómalos en equipos comparando patrones actuales con históricos normales.</p>
                    
                    <h5>Algoritmo Principal</h5>
                    <span class="algorithm-badge">Isolation Forest</span>
                    <span class="algorithm-badge">Unsupervised Learning</span>
                    <span class="algorithm-badge">Ensemble Trees</span>
                    
                    <h5>Metodología</h5>
                    <ul>
                        <li><strong>Isolation scoring:</strong> Medida de aislamiento en árboles</li>
                        <li><strong>Contaminación estimada:</strong> 5-10% de datos anómalos</li>
                        <li><strong>Features multivariadas:</strong> 8-15 variables por equipo</li>
                        <li><strong>Ventana deslizante:</strong> Análisis continuo en tiempo real</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <div class="metrics-box">
                        <h6>Métricas del Modelo</h6>
                        <ul class="list-unstyled">
                            <li><strong>Precisión:</strong> 94.2%</li>
                            <li><strong>Falsos Positivos:</strong> 3.1%</li>
                            <li><strong>Detección Rate:</strong> 91.8%</li>
                            <li><strong>Silhouette Score:</strong> 0.73</li>
                        </ul>
                        
                        <h6>Niveles de Alerta</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-success">🟢 NORMAL</span> < 0.3</li>
                            <li><span class="badge bg-warning">🟡 ATENCIÓN</span> 0.3-0.6</li>
                            <li><span class="badge bg-danger">🔴 CRÍTICO</span> > 0.6</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pipeline de Procesamiento -->
        <div class="model-card">
            <h3>⚙️ Pipeline de Procesamiento de Datos</h3>
            <div class="row">
                <div class="col-12">
                    <h5>Arquitectura del Sistema</h5>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6>📊 Ingesta</h6>
                                    <small>Excel Upload<br>Data Validation<br>Schema Check</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6>🧹 Limpieza</h6>
                                    <small>Missing Values<br>Outlier Detection<br>Data Normalization</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6>🔬 Feature Engineering</h6>
                                    <small>Time Features<br>Lag Variables<br>Rolling Statistics</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6>🎯 ML Inference</h6>
                                    <small>Model Predictions<br>Ensemble Results<br>Confidence Scores</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calidad de Datos -->
        <div class="model-card">
            <h3>📋 Calidad de Datos y Validación</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5>Métricas de Calidad</h5>
                    <ul>
                        <li><strong>Completitud:</strong> 98.5% de campos completos</li>
                        <li><strong>Consistencia:</strong> 96.2% datos consistentes</li>
                        <li><strong>Precisión:</strong> 94.8% datos validados</li>
                        <li><strong>Actualidad:</strong> Datos procesados cada 24h</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5>Validaciones Implementadas</h5>
                    <ul>
                        <li>Validación de tipos de datos</li>
                        <li>Rangos de valores permitidos</li>
                        <li>Consistencia temporal</li>
                        <li>Detección de duplicados</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="{{ url_for('dashboard') }}" class="btn btn-primary">Volver al Dashboard</a>
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">Inicio</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
